---
name: "需要予測"
description: "統計手法や機械学習を活用した需要予測。過去データ、トレンド、季節性を分析し、精度の高い予測で在庫最適化と欠品防止を実現"
---

# 需要予測

## このスキルを使う場面

- 生産計画・調達計画の立案が必要
- 在庫最適化を進めたい
- 欠品や過剰在庫を削減したい
- 季節変動や トレンドの予測が求められる
- 新製品の需要を予測したい
- 予測精度を改善したい

## 思考プロセス

### フェーズ1: 需要予測の準備

**ステップ1: 予測対象とスコープの定義**

何を、どのレベルで予測するか決定:

**1. 予測対象の特定**

- [ ] 製品レベル(SKU単位 vs 製品群)
- [ ] 地域レベル(拠点別 vs 全社合計)
- [ ] 顧客レベル(顧客別 vs 全体)
- [ ] チャネルレベル(販売チャネル別)

**2. 予測期間の設定**

短期予測:
- [ ] 1-4週間:発注・生産計画
- [ ] 週次・日次単位
- [ ] 高精度が要求される

中期予測:
- [ ] 1-6ヶ月:在庫計画、要員計画
- [ ] 月次単位
- [ ] 戦術的計画に使用

長期予測:
- [ ] 6ヶ月-数年:設備投資、戦略計画
- [ ] 四半期・年次単位
- [ ] トレンド把握が主目的

**3. 予測粒度の決定**

- トップダウン vs ボトムアップ
- 階層的予測(製品群 → 個別製品)
- 予測粒度と精度のトレードオフ

**ステップ2: データ収集と整備**

予測に必要なデータを準備:

**1. 内部データ**

販売実績データ:
- [ ] 過去の販売数量・金額
- [ ] 日次・週次・月次データ
- [ ] 最低2-3年分の履歴
- [ ] 欠品時の販売機会損失の考慮

在庫・発注データ:
- [ ] 在庫推移
- [ ] 発注履歴
- [ ] リードタイム実績

プロモーション・イベントデータ:
- [ ] キャンペーン実施日・内容
- [ ] 価格変動
- [ ] 広告・販促活動
- [ ] 新製品投入

**2. 外部データ**

- [ ] 市場動向・業界データ
- [ ] 経済指標(GDP、消費者信頼感指数等)
- [ ] 天候データ(気温、降水量等)
- [ ] カレンダー情報(祝日、イベント)
- [ ] 競合動向

**3. データクレンジング**

- [ ] 異常値の検出・処理
- [ ] 欠損値の補完
- [ ] 外れ値の処理(プロモーション、在庫切れ等)
- [ ] データ形式の統一
- [ ] 集計単位の統一

**ステップ3: 需要特性の分析**

需要パターンを理解:

**1. ABC分析**

重要度による分類:
- A品目(重要度高):売上上位20%、詳細予測
- B品目(中):売上中位30%、標準予測
- C品目(低):売上下位50%、簡易予測

分析指標:
- 売上高
- 利益貢献度
- 戦略的重要性

**2. 需要変動パターンの分類**

安定需要:
- 変動が小さい
- 予測しやすい
- シンプルな手法で対応

季節変動:
- 季節性あり(年次パターン)
- 季節調整が必要
- 季節性分解手法

トレンド:
- 増加・減少傾向
- 製品ライフサイクル
- 成長曲線モデル

不規則変動:
- ランダムな変動
- 予測困難
- 柔軟な対応が必要

**3. XYZ分析**

変動性による分類:
- X品目:変動小(変動係数 < 20%)
- Y品目:変動中(20-50%)
- Z品目:変動大(> 50%)

変動係数 = 標準偏差 ÷ 平均 × 100

**移行条件:**

- [ ] 予測対象とスコープを定義した
- [ ] 必要なデータを収集・整備した
- [ ] 需要特性を分析した

### フェーズ2: 予測手法の選択と実行

**ステップ1: 予測手法の選択**

需要特性に応じた手法を選択:

**1. 定性的予測手法**

専門家判断:
- 用途:データ不足時、新製品
- 方法:経験豊富な担当者の判断
- メリット:市場知見を活用
- デメリット:主観的、属人的

デルファイ法:
- 複数専門家の意見を集約
- 反復的な合意形成
- 予測の妥当性向上

市場調査:
- 顧客アンケート
- テストマーケティング
- 購入意向調査

**2. 時系列分析手法**

移動平均法:
- 計算:直近N期間の平均
- 用途:安定需要、短期予測
- メリット:シンプル
- デメリット:トレンド・季節性に弱い

指数平滑法(Exponential Smoothing):
- 単純指数平滑法:レベルのみ
- ホルト法:トレンドも考慮
- ウィンターズ法:季節性も考慮
- メリット:計算が軽い、近年のデータを重視
- デメリット:パラメータ調整が必要

ARIMA(自己回帰和分移動平均):
- Box-Jenkins法
- 自己相関を考慮
- トレンド・季節性に対応
- メリット:柔軟性が高い
- デメリット:複雑、専門知識必要

**3. 因果モデル**

回帰分析:
- 説明変数(価格、プロモーション等)と需要の関係
- 単回帰・重回帰
- メリット:要因分析が可能
- デメリット:説明変数の特定が必要

**4. 機械学習手法**

ランダムフォレスト:
- 決定木の集合学習
- 非線形関係に対応
- 重要変数の特定

XGBoost・LightGBM:
- 勾配ブースティング
- 高精度
- 大規模データに対応

ニューラルネットワーク:
- ディープラーニング
- LSTM(時系列予測)
- 複雑なパターン学習

**ステップ2: 予測モデルの構築**

選択した手法で予測モデル作成:

**1. データ分割**

- 学習データ(Training):60-70%
- 検証データ(Validation):15-20%
- テストデータ(Test):15-20%

時系列データは順序を保持

**2. 特徴量エンジニアリング**

時間特徴:
- 年、月、週、曜日
- 祝日フラグ
- 季節(春夏秋冬)

ラグ特徴:
- 前週・前月の需要
- 前年同期の需要
- 移動平均

外部要因:
- 気温、降水量
- プロモーションフラグ
- 価格変動

**3. モデル学習と調整**

- パラメータチューニング
- クロスバリデーション
- 過学習の防止
- 複数モデルの比較

**ステップ3: 予測精度の評価**

予測モデルの性能を測定:

**1. 精度指標の計算**

MAE(Mean Absolute Error):平均絶対誤差
- MAE = Σ|実績 - 予測| ÷ n
- 単位:元データと同じ
- 解釈しやすい

RMSE(Root Mean Squared Error):二乗平均平方根誤差
- RMSE = √(Σ(実績 - 予測)² ÷ n)
- 大きな誤差にペナルティ

MAPE(Mean Absolute Percentage Error):平均絶対誤差率
- MAPE = Σ|実績 - 予測| / 実績 ÷ n × 100%
- 単位:パーセンテージ
- 異なるスケールの比較可能

Bias(バイアス):
- Bias = Σ(実績 - 予測) ÷ n
- 過大予測・過小予測の傾向

**2. 精度目標**

- MAPE < 20%:優秀
- MAPE 20-50%:許容
- MAPE > 50%:要改善

製品特性により目標値は異なる

**3. モデル選択**

- 複数モデルの比較
- テストデータでの検証
- 精度と計算コストのバランス
- 解釈可能性の考慮

**移行条件:**

- [ ] 適切な予測手法を選択した
- [ ] 予測モデルを構築した
- [ ] 予測精度を評価した

### フェーズ3: 予測の実行と調整

**ステップ1: 予測の生成**

定期的な予測実行:

**1. 予測プロセスの自動化**

- 定期実行スケジュール(週次・月次)
- データの自動取得
- モデルの自動実行
- 結果の自動出力

**2. 階層予測の統合**

- ボトムアップ:個別製品予測の集計
- トップダウン:全体予測を製品へ配分
- ミドルアウト:中間レベルから上下へ展開

整合性の確保:
- 上位階層と下位階層の合計が一致
- 調整(Reconciliation)手法の適用

**3. 予測結果の出力**

- 点予測(単一値)
- 区間予測(信頼区間)
- シナリオ予測(楽観・標準・悲観)

**ステップ2: 人間の判断による調整**

統計予測に専門知見を追加:

**1. 予測調整の場面**

- プロモーション・キャンペーン計画
- 新製品投入
- 市場環境の大きな変化
- 競合の動き
- 在庫切れの影響補正

**2. 調整プロセス**

- 統計予測をベースライン
- 営業・マーケの情報を反映
- 調整理由の記録
- 調整幅の制限(±30%等)

**3. コンセンサス予測**

S&OP(Sales & Operations Planning):
- 営業、マーケ、生産、SCMの合同会議
- 統計予測を基に議論
- 合意形成された最終予測
- 月次で実施

**ステップ3: 予測精度のモニタリング**

継続的な精度確認と改善:

**1. 実績との比較**

- 予測と実績の乖離分析
- 製品別・地域別の精度確認
- トレンド把握
- 外れ値の要因分析

**2. フィードバックループ**

- 予測誤差の原因分析
- モデルパラメータの再調整
- 特徴量の追加・削除
- モデルの再学習

**3. アラート設定**

- 精度悪化時の通知
- 需要急変の検知
- 例外的パターンの警告

**移行条件:**

- [ ] 定期的に予測を生成している
- [ ] 人間の判断で適切に調整している
- [ ] 予測精度をモニタリングしている

### フェーズ4: 予測の活用と改善

**ステップ1: 予測の活用**

予測を計画に反映:

**1. 生産計画への反映**

- 主生産計画(MPS)
- 資材所要量計画(MRP)
- 能力計画
- 要員計画

**2. 在庫計画への反映**

- 安全在庫の設定
- 発注点の計算
- 補充計画
- 配置計画(拠点間配分)

**3. 調達計画への反映**

- 長期購買契約
- サプライヤーへの予測共有
- リードタイムの考慮
- 原材料確保

**ステップ2: 予測精度の改善**

継続的な精度向上:

**1. モデルの定期的な更新**

- 最新データでの再学習
- 季節パターンの更新
- 新しい特徴量の追加
- 新手法の試行

**2. 予測手法の高度化**

- アンサンブル学習(複数モデルの組み合わせ)
- ディープラーニングの導入
- 外部データの活用拡大
- リアルタイム予測

**3. データ品質の向上**

- データ収集プロセスの改善
- 欠損値・異常値の削減
- マスタデータの整備
- 新データソースの開拓

**ステップ3: 組織能力の向上**

予測能力を組織に定着:

**1. 教育・トレーニング**

- 予測手法の理解
- ツールの使い方
- データリテラシー
- 統計の基礎知識

**2. プロセスの標準化**

- 予測手順の文書化
- ツール・システムの整備
- 役割分担の明確化
- 定例会議の設定

**3. 文化の醸成**

- データドリブンな意思決定
- 予測と実績の乖離分析を学習機会に
- 失敗を責めない文化
- 継続的改善のマインドセット

**移行条件:**

- [ ] 予測を計画に活用している
- [ ] 予測精度が向上している
- [ ] 組織の予測能力が高まっている

## 判断のポイント

### 定性 vs 定量予測

**定性的予測を選択:**

- 過去データが不足(新製品、新市場)
- 市場環境が大きく変化
- 専門家の知見が重要
- 戦略的判断が必要

**定量的予測を選択:**

- 十分な過去データがある
- 需要パターンが安定
- 多数のSKUを予測
- 客観性・再現性が重要

**推奨:組み合わせ**

- 統計予測をベースライン
- 人間の判断で調整

### 予測手法の選択基準

**シンプルな手法(移動平均、指数平滑法):**

- データが限定的
- 安定した需要
- 短期予測
- 計算リソース制約

**高度な手法(ARIMA、機械学習):**

- 大量のデータが利用可能
- 複雑な需要パターン
- 多数の説明変数
- 高精度が必要

**判断基準:**

- データの量と質
- 予測対象の特性
- 必要な精度
- 利用可能なリソース(人材、システム)

### 予測期間と更新頻度

**短期予測(1-4週間):**

- 更新頻度:週次または日次
- 用途:発注、生産スケジュール
- 高精度が要求される

**中期予測(1-6ヶ月):**

- 更新頻度:月次
- 用途:在庫計画、要員計画
- 精度と安定性のバランス

**長期予測(6ヶ月以上):**

- 更新頻度:四半期
- 用途:設備投資、戦略計画
- トレンド把握が主

## よくある落とし穴

1. **過去データへの過度な依存**
   - ❌ 過去パターンが将来も続くと仮定
   - ✅ 市場環境変化を考慮

2. **予測精度の過信**
   - ❌ 予測通りに計画し柔軟性なし
   - ✅ 予測誤差を前提に計画

3. **複雑なモデルへの偏重**
   - ❌ 最新手法を盲目的に適用
   - ✅ シンプルで解釈可能なモデルから

4. **プロモーション影響の無視**
   - ❌ 通常需要として予測
   - ✅ プロモーション効果を分離

5. **データ品質の軽視**
   - ❌ 不正確なデータで予測
   - ✅ データクレンジングが前提

6. **予測調整の属人化**
   - ❌ 特定の人しか調整できない
   - ✅ プロセスを標準化

7. **フィードバック不足**
   - ❌ 予測誤差を分析しない
   - ✅ 継続的な学習と改善

## 検証ポイント

### データの準備

- [ ] 十分な期間のデータを収集した(最低2年)
- [ ] データクレンジングを実施した
- [ ] 異常値・外れ値を処理した
- [ ] 外部データを収集した(必要に応じて)

### モデルの妥当性

- [ ] 需要特性に適した手法を選択した
- [ ] 複数の手法を比較した
- [ ] 過学習していない
- [ ] テストデータで精度検証した

### 予測精度

- [ ] 精度指標を計算した(MAPE等)
- [ ] 目標精度を達成している
- [ ] 製品別・地域別の精度を確認した
- [ ] ベンチマーク(ナイーブ予測等)より優れている

### 実務での活用

- [ ] 予測を計画に反映している
- [ ] 定期的に予測を更新している
- [ ] 実績との乖離を分析している
- [ ] 継続的に精度改善している

## 他スキルとの連携

### demand-forecasting → inventory-management

需要予測から在庫最適化へ:

1. このスキルで需要を予測
2. 予測誤差(不確実性)も算出
3. inventory-management スキルで安全在庫計算
4. 在庫と欠品のバランス最適化

### demand-forecasting → supply-chain-optimization

需要予測とSC最適化:

1. このスキルで需要シナリオを作成
2. 複数シナリオでの需要予測
3. supply-chain-optimization スキルで最適計画
4. ロバストな意思決定

### demand-forecasting → supply-chain-data-analytics

予測精度の高度な分析:

1. このスキルで予測モデルを構築
2. さらなる精度向上の必要性
3. supply-chain-data-analytics スキルで詳細分析
4. 新しい特徴量や手法の発見

### demand-forecasting → kpi-management

予測精度のKPI管理:

1. このスキルで予測を実施
2. 予測精度指標(MAPE, Bias等)を測定
3. kpi-management スキルでKPI管理
4. 継続的な精度改善

## 需要予測のベストプラクティス

### 複数手法の組み合わせ

- シンプルな手法から開始
- 複数モデルの比較
- アンサンブル学習
- 統計予測 + 人間の判断

### 階層予測とReconciliation

- 複数レベルでの予測
- 整合性の確保
- ボトムアップとトップダウンの統合

### コラボレーティブ予測

- 部門横断での予測
- S&OP(Sales & Operations Planning)
- サプライヤーとの情報共有
- 顧客との需要情報共有

### 継続的改善

- 予測vs実績の定期分析
- モデルの定期的な更新
- 新手法・新データの試行
- 学習する組織文化
