---
name: "共通プラクティス"
description: "全スキル共通の思考習慣。前提条件、検証、エラー回復、コミュニケーションの原則を提供"
---

# 共通プラクティス: 全スキル共通の思考習慣

## このスキルを使う場面

- すべてのタスクで参照必須
- 作業の各段階で基本原則を確認する時
- 行き詰まった時の対処法が必要な時
- エラーや予期しない状況に遭遇した時

## 思考プロセス

### フェーズ1: 前提条件の明示

すべての作業を始める前に、以下の前提条件を明確にする：

**ステップ1: 現状の理解**

- [ ] 現在の環境・状態を把握した
- [ ] 制約条件を特定した（時間、リソース、技術的制約）
- [ ] 既存のコードベース・システムを理解した
- [ ] 依存関係を確認した

**ステップ2: 目標の明確化**

- [ ] 最終的な成功の定義を明確にした
- [ ] 中間目標を設定した
- [ ] 検証可能な基準を定義した
- [ ] スコープを明確にした（やること・やらないこと）

**ステップ3: 仮定の文書化**

作業を進める上で前提としている仮定を明示：

- 技術的な仮定（例: Python 3.8 以上が利用可能）
- ビジネス上の仮定（例: ユーザーは認証済み）
- データに関する仮定（例: 入力データは UTF-8）

**移行条件:**

- すべての前提条件が明確になったら次のフェーズへ
- 不明点がある場合はユーザーに確認してから進む

### フェーズ2: ステップごとの検証

各ステップ実行後に必ず検証を行う：

**ステップ1: 実行前の確認**

各アクションを実行する前に：

- [ ] このステップの目的を一文で説明できる
- [ ] 期待される結果を明確にした
- [ ] 失敗した場合の影響を理解した
- [ ] ロールバック方法を把握した（必要な場合）

**ステップ2: 実行中のモニタリング**

実行中に以下を確認：

- 進捗が期待通りか
- エラーや警告が出ていないか
- リソース使用量が適切か
- 想定外の動作がないか

**ステップ3: 実行後の検証**

各ステップ完了後に：

- [ ] 期待した結果が得られたか
- [ ] 副作用がないか確認した
- [ ] 次のステップへ進む条件を満たしているか
- [ ] 学んだこと・発見したことを記録した

**検証の原則:**

- **小さく検証**: 大きな変更の前に小さく試す
- **早く検証**: 問題は早期に発見する
- **明示的に検証**: 「たぶん大丈夫」ではなく実際に確認
- **自動化を優先**: 可能なら自動テストで検証

### フェーズ3: 行き詰まった時の対処法

進捗が止まった場合の体系的なアプローチ：

**ステップ1: 問題の特定**

行き詰まりの原因を特定：

1. **理解不足**
   - 要件が不明確
   - 技術的な知識が不足
   - コードベースの理解が不十分
   → 学習・調査に時間を使う

2. **技術的制約**
   - ツール・ライブラリの制限
   - パフォーマンスの問題
   - 互換性の問題
   → 代替アプローチを検討

3. **設計の問題**
   - アプローチが適切でない
   - スコープが大きすぎる
   - 前提条件が間違っている
   → 設計を見直す

**ステップ2: 対処戦略の選択**

状況に応じた戦略を選択：

1. **分解戦略**: 問題を小さく分割して一つずつ解決
2. **簡略化戦略**: 最小限の機能から始める
3. **代替戦略**: 別のアプローチを試す
4. **調査戦略**: より多くの情報を集める
5. **相談戦略**: ユーザーに状況を説明し、方向性を確認

**ステップ3: 時間制限のある試行**

- 一つのアプローチに固執しない
- 15-30分試して進展がなければ別の方法を検討
- 試したことと結果を記録する
- 3回試して進展がなければユーザーに報告

### フェーズ4: エラーからの回復戦略

エラーに遭遇した際の体系的な対応：

**ステップ1: エラーの記録と理解**

1. **完全なエラーメッセージを記録**
   - エラーメッセージ全文
   - スタックトレース
   - 発生条件
   - 環境情報

2. **エラーの分類**
   - 構文エラー: コードの書き方の問題
   - 実行時エラー: 実行中の予期しない状態
   - 論理エラー: コードは動くが結果が間違い
   - 環境エラー: 依存関係・設定の問題

**ステップ2: 原因の特定**

1. **エラーメッセージを読む**: 何が問題かを正確に理解
2. **最小再現ケースを作成**: 問題を最小限のコードで再現
3. **最近の変更を確認**: 何が変わったかを追跡
4. **仮説を立てる**: なぜエラーが起きたか推測

**ステップ3: 修正と検証**

1. **一つずつ修正**: 複数の変更を同時にしない
2. **修正後に検証**: 本当に直ったか確認
3. **副作用の確認**: 他を壊していないか確認
4. **根本原因の対処**: 症状だけでなく原因を修正

**エラー対応の原則:**

- **慌てない**: エラーは情報を提供してくれる
- **推測しない**: エラーメッセージを正確に読む
- **記録する**: 試したこと・結果を記録
- **学習する**: 同じエラーを繰り返さない

## 判断のポイント

### いつ質問すべきか

以下の場合はユーザーに質問する：

1. **要件が曖昧**: 複数の解釈が可能
2. **重要な決定**: 大きな影響がある技術選択
3. **スコープの確認**: 要求範囲が不明確
4. **制約の確認**: 時間・予算・技術的制約
5. **行き詰まり**: 3回試して進展がない場合

### いつ進めるべきか

以下の場合は判断して進める：

1. **標準的な慣習**: 一般的なベストプラクティスがある
2. **小さな決定**: 後で変更しやすい
3. **明確な要件**: 解釈の余地がない
4. **時間の制約**: 迅速な対応が必要（緊急バグ等）

### 品質の基準

以下の基準を常に満たす：

1. **正確性**: 正しく動作する
2. **可読性**: 他の人が理解できる
3. **保守性**: 将来変更しやすい
4. **テスト可能性**: 検証できる
5. **セキュリティ**: 安全である

## よくある落とし穴

1. **前提条件の確認不足**
   - ❌ 環境を確認せずに作業開始
   - ✅ 必ず現状を把握してから開始

2. **検証のスキップ**
   - ❌ 「たぶん大丈夫」で次に進む
   - ✅ 各ステップで明示的に検証

3. **エラーの無視**
   - ❌ 警告を無視して進める
   - ✅ すべてのエラー・警告を調査

4. **一人で抱え込む**
   - ❌ 行き詰まっても報告しない
   - ✅ 早めにユーザーに状況を共有

5. **大きすぎる変更**
   - ❌ 一度に多くを変更する
   - ✅ 小さく段階的に進める

6. **記録の欠如**
   - ❌ 試したことを記録しない
   - ✅ 決定・試行・結果を記録

## 検証ポイント

### 作業開始前

- [ ] 前提条件をすべて明示した
- [ ] 成功の定義を明確にした
- [ ] 不明点をユーザーに確認した
- [ ] アプローチの妥当性を検討した

### 作業中

- [ ] 各ステップで検証している
- [ ] 進捗が計画通りか確認している
- [ ] エラーが発生したら適切に対処している
- [ ] 必要に応じてユーザーに報告している

### 作業完了後

- [ ] 期待通りの結果が得られた
- [ ] 副作用がないことを確認した
- [ ] エッジケースをチェックした
- [ ] ドキュメント・コメントを更新した

## コミュニケーションの原則

### ユーザーへの報告タイミング

**即座に報告:**

- 要件の不明点を発見した時
- 重大なエラーに遭遇した時
- 想定外の制約を発見した時
- スコープの変更が必要な時

**定期的に報告:**

- 長時間かかるタスクの進捗
- 重要なマイルストーンの達成
- 技術的な決定を行った時

**完了時に報告:**

- タスクの完了
- 実施した内容のサマリー
- 発見した問題点
- 次のステップの提案（あれば）

### 報告の形式

**状況報告の構造:**

1. **現状**: 今何をしているか
2. **進捗**: どこまで完了したか
3. **課題**: 何が問題か（あれば）
4. **次のステップ**: これから何をするか

**質問の形式:**

1. **背景**: なぜ質問が必要か
2. **選択肢**: 考えられるオプション
3. **推奨**: 自分の推奨（理由付き）
4. **質問**: 具体的に何を確認したいか

## 継続的改善

### 各タスク後の振り返り

タスク完了後に以下を振り返る：

1. **うまくいったこと**: 何が効果的だったか
2. **改善できること**: 次回どう改善するか
3. **学んだこと**: 新しい知識・技術
4. **避けるべきこと**: 繰り返さないこと

### パターンの認識

繰り返し遭遇する問題や成功パターンを記録：

- 頻出するエラーとその解決方法
- 効果的だったアプローチ
- 避けるべきアンチパターン
- 有用なツール・技術

## 他スキルとの連携

この共通プラクティススキルは、すべての個別スキルと組み合わせて使用する：

- **debugging**: エラーからの回復戦略を適用
- **code-creation**: 前提条件の明示とステップごとの検証
- **refactoring**: 各ステップでの検証が特に重要
- **data-analysis**: 仮定の文書化と検証が重要
- **system-design**: 前提条件の明示と判断のポイント
- **code-review**: 品質の基準を適用
- **performance-optimization**: 検証と計測の原則
- **documentation**: コミュニケーションの原則を適用
