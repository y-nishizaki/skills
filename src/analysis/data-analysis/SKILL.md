---
name: "データ分析"
description: "データ分析・探索時の思考プロセス。データ、分析、探索、可視化、統計に関する依頼に対応"
---

# データ分析: データ分析・探索時の思考プロセス

## このスキルを使う場面

- データセットの探索が必要
- 統計的な分析・可視化が求められる
- パターンや傾向の発見が目的
- データの品質確認が必要
- 仮説の検証が必要
- レポート・ダッシュボードの作成

## 思考プロセス

### フェーズ1: データの初期確認

**ステップ1: データの読み込みと概要把握**

最初にデータの全体像を理解する：

**1. 基本情報の確認**

- [ ] データのサイズ（行数・列数）
- [ ] データ型（数値・文字列・日付等）
- [ ] メモリ使用量
- [ ] データソース・更新日時

**2. サンプルデータの確認**

- [ ] 先頭数行を表示
- [ ] 末尾数行を表示
- [ ] ランダムサンプルを表示
- [ ] データの構造を理解

**3. 統計サマリの確認**

数値列について：

- [ ] 平均・中央値・標準偏差
- [ ] 最小値・最大値
- [ ] 四分位数
- [ ] データ分布の概要

カテゴリ列について：

- [ ] ユニーク値の数
- [ ] 最頻値
- [ ] 値の分布

**ステップ2: データ品質の確認**

**1. 欠損値の確認**

- [ ] 各列の欠損値の数・割合
- [ ] 欠損パターン（ランダムか体系的か）
- [ ] 欠損の理由（推測）
- [ ] 対処方法の検討

**2. 重複の確認**

- [ ] 完全重複行の有無
- [ ] キー列の重複
- [ ] 重複の理由
- [ ] 対処の必要性

**3. 異常値・外れ値の確認**

- [ ] 明らかに異常な値
- [ ] 統計的な外れ値
- [ ] データ範囲の妥当性
- [ ] 入力エラーの可能性

**4. データ整合性の確認**

- [ ] ID の一意性
- [ ] 日付の妥当性（未来の日付等）
- [ ] 数値の妥当性（負の年齢等）
- [ ] カテゴリの妥当性

**移行条件:**

- [ ] データの全体像を把握した
- [ ] データ品質の問題を特定した
- [ ] 前処理の必要性を判断した

### フェーズ2: 探索的データ分析（EDA）

**ステップ1: 単変量分析**

各変数を個別に分析：

**数値変数:**

1. **分布の確認**
   - ヒストグラムで分布を可視化
   - 正規分布・偏りの確認
   - 複数のピークの有無

2. **箱ひげ図**
   - 中央値・四分位範囲
   - 外れ値の確認
   - グループ間の比較

3. **記述統計**
   - 歪度・尖度
   - パーセンタイル
   - 範囲・分散

**カテゴリ変数:**

1. **度数分布**
   - 各カテゴリの出現回数
   - 割合・パーセント
   - 棒グラフで可視化

2. **バランスの確認**
   - 極端な偏りがないか
   - マイノリティクラスの存在
   - サンプリングバイアスの可能性

**ステップ2: 二変量分析**

変数間の関係を分析：

**数値 vs 数値:**

1. **散布図**
   - 関係性の可視化
   - 線形・非線形の判断
   - クラスタリングの有無

2. **相関係数**
   - ピアソン相関（線形関係）
   - スピアマン相関（順序関係）
   - 相関行列・ヒートマップ

3. **回帰分析**
   - トレンドの確認
   - 予測の可能性
   - 影響の大きさ

**カテゴリ vs 数値:**

1. **グループ別統計**
   - カテゴリごとの平均・中央値
   - 箱ひげ図での比較
   - バイオリンプロット

2. **分布の比較**
   - グループ間の差
   - 重なり・分離度
   - 統計的有意性

**カテゴリ vs カテゴリ:**

1. **クロス集計**
   - 各組み合わせの度数
   - 割合の計算
   - ヒートマップ

2. **関連性の測定**
   - カイ二乗検定
   - クラメールの V
   - 独立性の確認

**ステップ3: 多変量分析**

複数の変数を同時に分析：

1. **相関行列**
   - すべての変数間の相関
   - 多重共線性の確認
   - ペアプロット

2. **次元削減**
   - PCA（主成分分析）
   - t-SNE
   - 高次元データの可視化

3. **クラスタリング**
   - 類似するデータのグループ化
   - パターンの発見
   - セグメンテーション

**移行条件:**

- [ ] 主要な変数の分布を理解した
- [ ] 変数間の関係を把握した
- [ ] パターン・傾向を発見した

### フェーズ3: 仮説の立案と検証

**ステップ1: 仮説の立案**

EDA で発見したパターンから仮説を立てる：

**良い仮説の条件:**

1. **明確**: 曖昧でない
2. **検証可能**: データで確認できる
3. **具体的**: 数値・基準が明確
4. **意味がある**: ビジネス・研究的価値

**仮説の例:**

- 「X が増えると Y も増える」
- 「グループ A は グループ B より平均が高い」
- 「季節によって売上が変動する」
- 「変数 X と Y には関連がない（独立）」

**ステップ2: 適切な統計手法の選択**

仮説とデータに応じた手法を選択：

**比較（平均の差）:**

- 2 グループ: t 検定
- 3 グループ以上: ANOVA
- 対応あり: 対応のある t 検定
- 非正規分布: ノンパラメトリック検定

**関連性:**

- 数値 vs 数値: 相関分析・回帰分析
- カテゴリ vs カテゴリ: カイ二乗検定
- カテゴリ vs 数値: ANOVA・t 検定

**予測:**

- 線形回帰
- ロジスティック回帰
- 決定木
- その他機械学習手法

**ステップ3: 統計的検証の実施**

**1. 前提条件の確認**

各統計手法の前提を確認：

- 正規性の仮定
- 等分散性の仮定
- 独立性の仮定
- サンプルサイズの十分性

**2. 検定の実施**

- 帰無仮説・対立仮説の設定
- 有意水準の設定（通常 0.05）
- 検定統計量の計算
- p 値の算出

**3. 結果の解釈**

- p 値の意味を理解
- 統計的有意性 ≠ 実質的重要性
- 効果量の確認
- 信頼区間の解釈

**4. 結論の導出**

- 仮説を支持するか棄却するか
- 実務的な意味
- 限界・注意点

**移行条件:**

- [ ] 仮説を立てた
- [ ] 適切な手法で検証した
- [ ] 結果を解釈した

### フェーズ4: 可視化と結果の伝達

> **📊 詳細な可視化戦略について:**
> ダッシュボード設計、高度な可視化ツール（Tableau、Looker、Power BI等）の選択、
> デザイン原則、ストーリーテリングなど、詳細な可視化戦略については
> [`marketing/data-visualization`](/src/marketing/data-visualization/SKILL.md) スキルを参照してください。
>
> ここでは分析結果を伝えるための**基本的な可視化**のみを扱います。

**ステップ1: 基本的な可視化の選択**

分析結果に適したグラフを選択：

**データ種類別の基本的なグラフ選択:**

- **分布を見せる:** ヒストグラム、箱ひげ図
- **比較を見せる:** 棒グラフ、箱ひげ図（グループ別）
- **関係を見せる:** 散布図、相関行列
- **時系列を見せる:** 折れ線グラフ
- **構成を見せる:** 積み上げ棒グラフ

**ステップ2: 基本的な可視化の品質チェック**

- [ ] 軸ラベル・タイトルが明確
- [ ] 単位が表示されている
- [ ] 凡例が分かりやすい
- [ ] 軸の範囲が適切
- [ ] 誤解を招く表現がない

**ステップ3: 洞察の抽出と伝達**

**1. 主要な発見をまとめる**

- 最も重要な発見を 3-5 点に絞る
- 数値で具体的に示す
- ビジネス・研究的意味を明確に

**2. ストーリーを構築**

- 論理的な流れ
- 問い → 分析 → 発見 → 示唆
- 聴衆に合わせた説明

**3. 推奨事項の提示**

- 発見に基づく提案
- 実行可能なアクション
- 次のステップ

## 判断のポイント

### データの前処理をどこまでやるか

**最小限の前処理:**

- 明らかなエラーの修正
- 分析に必要な列の選択
- 基本的なフォーマット統一

**徹底的な前処理:**

- 欠損値の補完
- 外れ値の処理
- 特徴量エンジニアリング
- 正規化・標準化

**判断基準:**

- 分析の目的
- データの品質
- 利用可能な時間
- 後続の分析・モデリングの要件

### どの可視化を使うべきか

> **📊 詳細な可視化ガイド:**
> より高度な可視化手法、ツール選択、デザイン原則については
> [`marketing/data-visualization`](/src/marketing/data-visualization/SKILL.md) スキルを参照してください。

**基本的なグラフ選択（データの種類別）:**

- 1 変数（数値）: ヒストグラム・箱ひげ図
- 1 変数（カテゴリ）: 棒グラフ
- 2 変数（数値）: 散布図
- 2 変数（カテゴリ＋数値）: グループ別箱ひげ図
- 時系列: 折れ線グラフ

### 統計的有意性の解釈

**p 値の意味:**

- p < 0.05: 統計的に有意（慣習的）
- ただし、有意 ≠ 重要
- サンプルサイズの影響を考慮

**実質的重要性:**

- 効果量を確認
- ビジネス的意味を考慮
- コンテキストで判断

## よくある落とし穴

1. **データを見ずに分析**
   - ❌ いきなり複雑な分析
   - ✅ まず基本的な確認

2. **データ品質の無視**
   - ❌ 欠損値・外れ値を無視
   - ✅ データクリーニングを先に

3. **過度な一般化**
   - ❌ サンプルから全体を断定
   - ✅ 限界を認識

4. **因果関係の誤解**
   - ❌ 相関 = 因果
   - ✅ 相関は因果を意味しない

5. **可視化の誤用**
   - ❌ 不適切なグラフ選択
   - ✅ データに合ったグラフ

6. **p-hacking**
   - ❌ 有意になるまで試す
   - ✅ 事前に仮説・手法を決める

7. **前提条件の無視**
   - ❌ 統計手法の前提を確認しない
   - ✅ 前提条件を検証

## 検証ポイント

### データ理解の検証

- [ ] データサイズ・構造を把握した
- [ ] 各変数の意味を理解した
- [ ] データ品質の問題を特定した
- [ ] 前処理の方針を決めた

### 分析の検証

- [ ] 適切な手法を選択した
- [ ] 前提条件を確認した
- [ ] 結果を正しく解釈した
- [ ] 限界を認識した

### 可視化の検証

- [ ] 目的に合ったグラフを選択した
- [ ] 軸・ラベルが明確
- [ ] 誤解を招く表現がない
- [ ] 見やすく分かりやすい

### 報告の検証

- [ ] 主要な発見を明確にした
- [ ] 数値で具体的に示した
- [ ] 推奨事項を提示した
- [ ] 限界・注意点を記載した

## 他スキルとの連携

### data-analysis ↔ data-visualization

データ分析と可視化の統合（双方向連携）：

**data-analysis → data-visualization:**

1. このスキルで探索的データ分析、仮説検証を実施
2. [`data-visualization`](/src/marketing/data-visualization/SKILL.md) スキルで分析結果を視覚的に伝えるストーリーを構築
3. 洞察を効果的にプレゼンテーション

**data-visualization → data-analysis:**

1. data-visualization スキルでダッシュボードから異常値や傾向を発見
2. このスキルで統計的分析と仮説検証を深掘り
3. 継続的な分析と改善のサイクルを構築

### data-analysis ↔ marketing-analytics

汎用データ分析とマーケティング分析の統合：

**data-analysis → marketing-analytics:**

1. このスキルで探索的データ分析と仮説検証を実施
2. [`marketing-analytics`](/src/marketing/marketing-analytics/SKILL.md) スキルでマーケティング特化のKPI設計とA/Bテストに展開
3. 統計的根拠に基づくマーケティング戦略の策定

**marketing-analytics → data-analysis:**

1. marketing-analytics スキルでマーケティングKPIと基本的な集計を実施
2. このスキルで高度な統計分析や予測モデルを構築
3. より深い洞察とマーケティング最適化を実現

### data-analysis → code-creation

分析結果を実装に活用：

1. このスキルでデータを分析
2. パターン・ルールを発見
3. code-creation スキルで実装
4. 分析結果に基づく機能追加

### data-analysis → system-design

データ分析からシステム設計へ：

1. このスキルでデータ特性を理解
2. スケール・パフォーマンス要件を把握
3. system-design スキルでアーキテクチャ設計
4. データ特性を考慮した設計

### data-analysis → documentation

分析結果の文書化：

1. このスキルで分析実施
2. 発見・洞察をまとめる
3. documentation スキルでレポート作成
4. 再現可能な形で文書化

### data-analysis → performance-optimization

データ分析でボトルネック発見：

1. このスキルでパフォーマンスデータを分析
2. ボトルネックを特定
3. performance-optimization スキルで改善
4. 改善効果を測定・分析

## データ分析のベストプラクティス

### 再現性の確保

- コードで分析を記録
- ランダムシードを固定
- 環境・バージョンを記録
- 段階的に保存

### バイアスへの注意

- サンプリングバイアス
- 確証バイアス
- 生存者バイアス
- 選択バイアス

### 倫理的配慮

- プライバシーの保護
- 公平性・差別の回避
- データの適切な使用
- 透明性の確保

### 段階的アプローチ

1. シンプルな分析から始める
2. 複雑さは必要に応じて追加
3. 各段階で結果を確認
4. 方向性を柔軟に修正
