---
name: "マーケティングデータ分析"
description: "KPI設計、A/Bテスト、Google Analytics、SQL等を活用してマーケティング施策を数値で評価し改善するスキル。データドリブンな意思決定とPDCAサイクルの高速化に使用"
---

# マーケティングデータ分析

## このスキルを使う場面

- マーケティング施策の効果を測定したい
- KPIを設計・モニタリングしたい
- A/Bテストで施策を比較検証したい
- Google Analyticsでユーザー行動を分析したい
- SQLでデータを抽出・集計したい
- ROI（投資対効果）を計算したい
- データに基づいて施策を改善したい

## データ分析プロセス

### フェーズ1: KPI設計

測定すべき指標を定義する。

**ステップ1: ビジネスゴールの明確化**

何を達成したいかを明確にする：

```
例: ECサイトの目標
- 売上を前年比120%に成長させる
- 新規顧客を月間1000人獲得する
- リピート率を30%に向上させる
```

**ステップ2: KPIツリーの設計**

ゴールを達成するための指標を階層化：

```
最終目標: 売上1億円/月

┗ 訪問者数 × コンバージョン率 × 平均購入単価
   ┃
   ┣ 訪問者数
   ┃  ┣ オーガニック検索
   ┃  ┣ 広告流入
   ┃  ┗ SNS流入
   ┃
   ┣ コンバージョン率
   ┃  ┣ カート到達率
   ┃  ┣ カート離脱率
   ┃  ┗ 購入完了率
   ┃
   ┗ 平均購入単価
      ┣ 商品単価
      ┗ 購入点数
```

**主要なマーケティングKPI:**

**認知段階:**

- [ ] リーチ（何人に届いたか）
- [ ] インプレッション（何回表示されたか）
- [ ] ブランド認知率

**検討段階:**

- [ ] Webサイト訪問者数
- [ ] ページビュー（PV）
- [ ] セッション時間
- [ ] 直帰率
- [ ] ページ遷移率

**獲得段階:**

- [ ] コンバージョン率（CVR）
- [ ] 顧客獲得コスト（CAC: Customer Acquisition Cost）
- [ ] リード数
- [ ] 商談化率

**継続段階:**

- [ ] リピート率
- [ ] 解約率（チャーン率）
- [ ] 顧客生涯価値（LTV: Lifetime Value）
- [ ] NPS（Net Promoter Score）

**収益性:**

- [ ] ROI（Return on Investment）= （利益 - 投資額） / 投資額
- [ ] ROAS（Return on Ad Spend）= 広告経由売上 / 広告費
- [ ] CPA（Cost Per Acquisition）= 広告費 / 獲得顧客数

**ステップ3: 目標値の設定**

各KPIの目標を設定：

SMART基準:

- **S**pecific（具体的）
- **M**easurable（測定可能）
- **A**chievable（達成可能）
- **R**elevant（関連性）
- **T**ime-bound（期限）

```
例:
❌ 「訪問者を増やす」
✅ 「3ヶ月以内に月間訪問者数を10,000から15,000に増やす」
```

### フェーズ2: データ収集と計測設計

**ステップ1: トラッキング設計**

**Google Analytics 4（GA4）の設定:**

1. **イベント設計**

   基本イベント（自動計測）:

   - page_view: ページ閲覧
   - session_start: セッション開始
   - first_visit: 初回訪問

   カスタムイベント（設定が必要）:

   ```javascript
   // ボタンクリック
   gtag('event', 'button_click', {
     'button_name': 'cta_signup',
     'page_location': '/pricing'
   });

   // フォーム送信
   gtag('event', 'form_submit', {
     'form_type': 'contact',
     'form_id': 'contact-form-001'
   });

   // 購入完了
   gtag('event', 'purchase', {
     'transaction_id': 'T12345',
     'value': 5000,
     'currency': 'JPY',
     'items': [...]
   });
   ```

2. **コンバージョン設定**

   - [ ] 目標とするイベントを特定
   - [ ] コンバージョンとしてマーク
   - [ ] 価値を設定（金額換算可能な場合）

3. **パラメータ設計**

   UTMパラメータでトラフィック元を識別:

   ```
   https://example.com/?utm_source=google&utm_medium=cpc&utm_campaign=spring_sale
   ```

   - utm_source: 流入元（google, facebook, newsletter）
   - utm_medium: メディア（cpc, email, social）
   - utm_campaign: キャンペーン名
   - utm_content: 広告の内容
   - utm_term: キーワード

**ステップ2: タグマネジメント**

Google Tag Manager（GTM）で効率的に管理:

```
タグ → トリガー → 変数

例: 資料ダウンロードの計測
タグ: GA4イベント「download」
トリガー: ダウンロードボタンのクリック
変数: ファイル名、ページURL
```

**ステップ3: データベースからの抽出**

SQLでデータを取得:

```sql
-- 月別売上集計
SELECT
  DATE_TRUNC('month', order_date) AS month,
  COUNT(DISTINCT user_id) AS customers,
  COUNT(*) AS orders,
  SUM(amount) AS revenue
FROM orders
WHERE order_date >= '2024-01-01'
GROUP BY month
ORDER BY month;

-- 新規顧客とリピーター分析
WITH first_purchase AS (
  SELECT
    user_id,
    MIN(order_date) AS first_order_date
  FROM orders
  GROUP BY user_id
)
SELECT
  o.user_id,
  CASE
    WHEN o.order_date = fp.first_order_date THEN '新規'
    ELSE 'リピート'
  END AS customer_type,
  COUNT(*) AS order_count,
  SUM(o.amount) AS revenue
FROM orders o
JOIN first_purchase fp ON o.user_id = fp.user_id
GROUP BY o.user_id, customer_type;
```

### フェーズ3: A/Bテスト

仮説を検証し、最適な施策を見つける。

**ステップ1: 仮説設計**

テストすべき仮説を明確に：

```
仮説: CTAボタンを「今すぐ登録」から「無料で始める」に変更すると、
      コンバージョン率が向上する

根拠: 「無料」という言葉がリスク低減につながる

成功基準: コンバージョン率が現状の2%から2.5%以上に向上
```

**ステップ2: テスト設計**

**テストの種類:**

1. **A/Bテスト**
   - A案とB案の2つを比較
   - 最もシンプル

2. **多変量テスト（MVT）**
   - 複数要素を同時にテスト
   - 要素間の相互作用を分析
   - 大量のトラフィックが必要

**テストパラメータ:**

- [ ] 対照群（A: コントロール）と実験群（B: バリエーション）
- [ ] 分割比率（通常50:50、リスク回避で90:10も）
- [ ] サンプルサイズ（統計的有意性を担保）
- [ ] テスト期間（最低1〜2週間、ビジネスサイクルを考慮）

**サンプルサイズ計算:**

必要なサンプルサイズは以下で決まる:

- ベースラインのコンバージョン率
- 検出したい差（最小検出効果）
- 有意水準（通常5%）
- 検出力（通常80%）

オンライン計算ツールを使用:

- Optimizely Sample Size Calculator
- Evan Miller's A/B Test Calculator

**ステップ3: 実施と分析**

**実施時の注意点:**

- [ ] 同時に複数のテストを避ける
- [ ] テスト期間中は設定を変更しない
- [ ] 曜日・時間帯のバイアスを排除（最低1週間）
- [ ] 外部要因（セール、広告キャンペーン）を考慮

**統計的有意性の検定:**

```
帰無仮説: A案とB案に差はない
対立仮説: A案とB案に差がある

検定手法: カイ二乗検定 or t検定

結果の読み方:
- p値 < 0.05: 統計的に有意（偶然ではない可能性が高い）
- p値 ≥ 0.05: 有意差なし
```

```
例:
A案（コントロール）: 訪問者1000人、CV 20人（CVR 2.0%）
B案（新デザイン）: 訪問者1000人、CV 30人（CVR 3.0%）

カイ二乗検定の結果: p = 0.03
→ 統計的に有意差あり、B案が優れている
```

**ステップ4: 意思決定**

```
判断基準:
1. 統計的有意性: p < 0.05
2. 実務的重要性: CVR改善が1%以上（ビジネスインパクト）
3. 実装コスト: 改善効果がコストを上回るか

結論:
- 両方満たす → B案を採用
- 有意だが改善が微小 → コスト次第
- 有意差なし → A案を継続、新仮説を検討
```

### フェーズ4: データ分析と洞察

**ステップ1: Google Analytics分析**

**1. ユーザー獲得分析**

どこから来ているかを把握:

```
レポート > ライフサイクル > 集客 > トラフィック獲得

見るべきポイント:
- セッション数の多いチャネル
- コンバージョン率の高いチャネル
- 新規ユーザー率
```

**2. 行動フロー分析**

ユーザーがどう動いているかを可視化:

```
経路データ探索レポート

分析ポイント:
- どのページで離脱が多いか
- コンバージョンに至る典型的なパス
- 想定外の動線
```

**3. コンバージョン分析**

```
レポート > ライフサイクル > エンゲージメント > コンバージョン

分析ポイント:
- コンバージョン率のトレンド
- デバイス別（PC/SP）の差
- ランディングページ別の効果
```

**4. セグメント分析**

特定のユーザー群を深掘り:

```
セグメント例:
- 新規 vs リピーター
- コンバージョンした vs していない
- モバイル vs デスクトップ
- トラフィックソース別
```

**ステップ2: ファネル分析**

顧客の段階的な移行を分析:

```
ファネル例: ECサイト

訪問者: 10,000人（100%）
     ↓ 離脱: 7,000人
商品閲覧: 3,000人（30%）
     ↓ 離脱: 2,400人
カート追加: 600人（6%）
     ↓ 離脱: 300人
購入完了: 300人（3%）

分析:
- 最大のボトルネック: 訪問→商品閲覧（70%離脱）
- 改善優先順位: ランディングページの最適化
```

**ステップ3: コホート分析**

時期別の顧客グループの行動を追跡:

```
2024年1月獲得ユーザーの継続率:

月   | ユーザー数 | 継続率
-----|-----------|-------
1月  | 1000      | 100%
2月  | 600       | 60%
3月  | 400       | 40%
4月  | 300       | 30%

洞察:
- 3ヶ月で70%が離脱
- リテンション施策が必要
```

**ステップ4: 相関分析**

KPI間の関係を発見:

```python
import pandas as pd

# 相関係数の計算
correlation = df[['pageviews', 'session_duration', 'conversion_rate']].corr()

例の結果:
- セッション時間 vs コンバージョン率: r = 0.65
  → 長く滞在するほどコンバージョンしやすい
  → コンテンツの質を高めて滞在時間を延ばす施策が有効
```

### フェーズ5: レポーティングとダッシュボード

> **📊 詳細なダッシュボード設計・可視化について:**
> 高度な可視化ツール（Tableau、Looker、Power BI等）の選択、
> ダッシュボード設計原則、デザインベストプラクティス、ストーリーテリングなど、
> 詳細な可視化戦略については [`marketing/data-visualization`](/src/marketing/data-visualization/SKILL.md) スキルを参照してください。
>
> ここではマーケティング分析に必要な**基本的なレポーティング**のみを扱います。

**ステップ1: 報告内容の設計**

誰が、何を、いつ見るかを決定:

```
経営層向け（週次レビュー）:
- 売上、顧客獲得数、ROI

マーケティング担当（日次モニタリング）:
- トラフィック、コンバージョン率、主要チャネルのパフォーマンス

施策担当（リアルタイム）:
- 広告クリック数、CPC（クリック単価）、CVR
```

**ステップ2: 基本的なレポート作成**

**主要指標のトラッキング:**

- [ ] KPIの現在値と目標値
- [ ] 前年同期比、前月比
- [ ] トレンド（折れ線グラフ）
- [ ] チャネル別内訳（棒グラフ）

## 検証ポイント

### KPI設計の妥当性

- [ ] ビジネスゴールと紐づいているか
- [ ] 測定可能か
- [ ] アクションにつながるか
- [ ] 適切な粒度（多すぎず少なすぎず）か

### データの信頼性

- [ ] トラッキングは正しく機能しているか
- [ ] データの欠損はないか
- [ ] 異常値を除外したか
- [ ] サンプルサイズは十分か

### 分析の深さ

- [ ] 表面的な数字だけでなく「なぜ」を探ったか
- [ ] セグメント別に分析したか
- [ ] 時系列での変化を見たか
- [ ] アクションプランを導出したか

## よくある落とし穴

1. **虚栄の指標（Vanity Metrics）**
   - ❌ PV数だけを追う
   - ✅ コンバージョンやエンゲージメントを見る

2. **統計的有意性の無視**
   - ❌ サンプル数が少ないのに結論を出す
   - ✅ 十分なサンプルで検定する

3. **複数のテストを同時実施**
   - ❌ 同時に3つのA/Bテスト
   - ✅ 1つずつ、または明確に分離

4. **相関と因果の混同**
   - ❌ 「PVが増えると売上が増えた」→ PVが原因
   - ✅ 第三の要因（広告投資）が両方を引き起こした可能性

5. **短期的な判断**
   - ❌ テスト開始2日で判断
   - ✅ 最低1週間、できれば2週間

## 実践例

### 例1: ECサイトのコンバージョン改善

**現状:**

- CVR: 2%
- 月間訪問者: 100,000人
- 月間売上: 1,000万円

**KPI設計:**

目標: CVRを2.5%に改善 → 売上1,250万円

**ファネル分析:**

```
訪問: 100,000
  ↓ 離脱70%
商品閲覧: 30,000
  ↓ 離脱80%
カート: 6,000
  ↓ 離脱67%
購入: 2,000（CVR 2%）
```

最大ボトルネック: カート→購入（67%離脱）

**A/Bテスト:**

仮説: 配送料無料ラインを表示すると、カート離脱が減る

- A案: 現状（何も表示しない）
- B案: 「あと1,500円で送料無料」と表示

結果:

- A案: カート→購入 33%
- B案: カート→購入 40%
- p値: 0.01（有意差あり）

**実装:**

B案を全体展開 → CVR 2.0% → 2.5%達成

### 例2: 広告キャンペーンのROI分析

**データ:**

```sql
SELECT
  utm_campaign,
  COUNT(DISTINCT session_id) AS sessions,
  SUM(revenue) AS revenue,
  SUM(ad_cost) AS ad_cost,
  SUM(revenue) / SUM(ad_cost) AS ROAS
FROM marketing_data
WHERE date >= '2024-01-01'
GROUP BY utm_campaign
ORDER BY ROAS DESC;
```

**結果:**

| キャンペーン | セッション | 売上 | 広告費 | ROAS |
|-------------|-----------|------|-------|------|
| brand_search | 5,000 | 500万 | 50万 | 10.0 |
| retargeting | 3,000 | 300万 | 60万 | 5.0 |
| display | 10,000 | 200万 | 100万 | 2.0 |

**洞察:**

- ブランド検索広告が最も効率的（ROAS 10.0）
- ディスプレイ広告は効率が悪い（ROAS 2.0）

**アクション:**

- ブランド検索の予算を増額
- ディスプレイ広告の一部を停止、またはターゲティング見直し

## 他スキルとの連携

### marketing-analytics ↔ data-visualization

マーケティング分析と可視化の統合（双方向連携）：

**marketing-analytics → data-visualization:**

1. このスキルでKPI設計、A/Bテスト、Google Analytics分析を実施
2. [`data-visualization`](/src/marketing/data-visualization/SKILL.md) スキルで分析結果を効果的なダッシュボードに変換
3. ステークホルダーへの説得力ある定期レポート作成

**data-visualization → marketing-analytics:**

1. data-visualization スキルでダッシュボードを構築し、パターンを発見
2. このスキルで統計的検証とROI分析を深掘り
3. データドリブンな施策改善サイクルを実現

### marketing-analytics ↔ data-analysis

マーケティング分析と汎用データ分析の統合：

**marketing-analytics → data-analysis:**

1. このスキルでマーケティングKPIと基本的な集計を実施
2. [`data-analysis`](/src/analysis/data-analysis/SKILL.md) スキルで高度な統計分析や予測モデルを構築
3. より深い洞察とマーケティング最適化を実現

**data-analysis → marketing-analytics:**

1. data-analysis スキルでデータの探索的分析と仮説検証
2. このスキルでマーケティング特化のKPI設計とA/Bテスト実施
3. 統計的根拠に基づくマーケティング戦略の策定

### marketing-analytics → market-research

定量データと定性データの統合:

1. このスキルで数値データを分析
2. market-research スキルで「なぜ」を深掘り
3. 数字とインサイトの両面から理解
