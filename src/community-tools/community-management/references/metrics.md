# コミュニティヘルスメトリクスと測定戦略

このリファレンスは、オープンソースコミュニティの健全性を評価し改善するためのフレームワークとメトリクスを提供します。

## 概要

コミュニティヘルスメトリクスは、重要な質問に答えるのに役立ちます:
- コミュニティは成長していますか、それとも衰退していますか?
- 新しいコントリビューターは持続的なコントリビューターになっていますか?
- プロジェクトは健全で持続可能ですか?
- 改善努力をどこに集中させるべきですか?

## コアメトリクスカテゴリー

### 1. 貢献メトリクス

**新規コントリビューター**
- **定義**: 一定期間に初めて貢献を行ったユニークな個人
- **測定**: マージされたPRの異なる著者のうち、以前の貢献がない人をカウント
- **目標**: 安定または増加傾向
- **シグナル**:
  - 増加: プロジェクトが新参者を引き付けている
  - 減少: オンボーディングの障壁が存在する可能性
  - 安定: 健全な補充率

**貢献頻度**
- **定義**: 貢献がどのくらいの頻度で発生するか
- **測定**:
  - 週/月あたりのコミット数
  - 週/月あたりに開かれたPR数
  - 週/月あたりに作成されたイシュー数
- **内訳**: コントリビュータータイプ別（新規、時々、定期的、コア）
- **健全なパターン**: 極端なスパイクや谷がない一貫した活動

**貢献分布**
- **定義**: コントリビューター間で貢献がどのように分散しているか
- **測定**:
  - 上位10人のコントリビューターからの貢献の割合
  - 貢献分布のジニ係数
- **シグナル**:
  - 高い集中度（上位10人から80%以上）: バスファクターリスク
  - 広い分布: 健全で多様なコミュニティ
- **目標**: 上位20%のコントリビューターからの貢献が70%未満

**貢献のタイプ**
コード以外も追跡する:
- コード貢献（コミット、PR）
- イシューのトリアージと管理
- ドキュメントの改善
- 実施されたコードレビュー
- コミュニティサポート（フォーラムの回答、チャットヘルプ）
- イベントの開催
- マーケティングとアドボカシー

### 2. エンゲージメントメトリクス

**コントリビューターの維持**
- **定義**: 時間の経過とともに貢献を続けるコントリビューターの割合
- **測定**:
  - 90日以内に2回目の貢献を行う新規コントリビューターの%
  - 前の期間にアクティブだった現在の期間にアクティブなコントリビューターの%
- **コホート分析**: 時間の経過とともにコントリビューターのコホートを追跡
- **健全な範囲**:
  - 新参者の30〜50%が2回目の貢献を行う
  - 定期的なコントリビューターの60〜80%が四半期ごとにアクティブのまま

**応答時間**
- **イシュー応答時間**: イシュー作成から最初の応答までの時間
  - 目標: イシューの80%に対して48時間未満
- **PR応答時間**: PR提出から最初のレビューまでの時間
  - 目標: PRの80%に対して72時間未満
- **解決時間**: イシュー/PR作成からクローズまでの時間
  - 複雑さによって異なる。ラベル/カテゴリー別に追跡

**コミュニティ活動**
- 週あたりのフォーラム/チャットメッセージ
- 会議の出席
- イベント参加
- ドキュメントの閲覧数

**エンゲージメントの深さ**
- 単一貢献vs.複数貢献の著者
- 貢献ラダーを通じた進行
- 2回目、5回目、10回目の貢献までの時間

### 3. 多様性と包括性メトリクス

**地理的多様性**
- 国/タイムゾーン別のコントリビューター
- 地域別のイベント出席
- コミュニケーションにおける言語の多様性

**組織の多様性**
- 雇用主/所属別のコントリビューター
- 企業の集中リスク
- 独立したコントリビューターの割合

**人口統計学的多様性**（データが利用可能な場合）
- 自己申告の性別、人種/民族
- キャリアステージ（学生、キャリア初期、経験豊富、退職）
- 専門的背景

**包括性の指標**
- 行動規範レポートと解決時間
- コミュニティチャネルでの感情
- 新参者の歓迎率（歓迎の応答を受け取る新規コントリビューターの%）
- 多様なグループによるガバナンスへの参加

### 4. プロジェクト健全性メトリクス

**イシュー管理**
- オープンなイシュー数と傾向
- イシューの年齢分布
- 月あたりにクローズされたイシュー
- イシュークローズ率（クローズ/オープンの比率）
- バグ対機能リクエストの比率
- 健全なパターン:
  - 安定または減少するバックログ
  - イシューの80%以上が1週間以内に応答を受け取る
  - クローズ率がオープン率と一致または上回る

**プルリクエストの健全性**
- PRマージ率（最終的にマージされたPRの%）
- PR拒否率と理由
- マージまでの時間
- 放棄されたPR率（30日以上活動がない）
- 健全なパターン:
  - 60%以上のマージ率
  - 20%未満の放棄率
  - マージまでの時間の減少

**コード品質**
- テストカバレッジの割合
- リンター違反の傾向
- 技術的負債のメトリクス
- セキュリティ脆弱性レポートと修正時間
- ドキュメントのカバレッジ

**リリースケーデンス**
- リリース間の時間
- リリース計画の透明性
- 破壊的変更の頻度
- 健全なパターン: 予測可能で定期的なリリーススケジュール

### 5. 持続可能性メトリクス

**バスファクター**
- **定義**: プロジェクトがリスクにさらされる前に離れることができるコントリビューターの数
- **測定**: 貢献の50%を占める最小のコントリビューター数
- **目標**: 3以上（理想的には5以上）
- **軽減**: 知識共有、ドキュメント化、分散所有権

**コントリビューターパイプライン**
コントリビューターラダーを通じた移動を追跡:
- ユーザー→初回コントリビューター: 変換率
- 初回→時々: 維持率
- 時々→定期的: 進行率
- 定期的→コミッター: 昇格率

**財務的持続可能性**（該当する場合）
- スポンサーシップ/寄付の傾向
- 確保された助成金資金
- 商業サポート収入
- ランウェイ（残りの資金の月数）

**組織の健全性**
- アクティブなメンテナーの数
- メンテナーのワークロード分布
- 後継者計画の状況
- 文書化されたプロジェクト知識

## 測定ツールとプラットフォーム

### GitHub/GitLab Analytics

**組み込みメトリクス**:
- Insights → Contributors: 貢献グラフ
- Insights → Community: コミュニティプロファイルチェックリスト
- Pulse: 最近の活動の概要
- Traffic: リポジトリのトラフィックとクローン

**制限事項**: 限られた履歴データ、基本的なメトリクスのみ

### CHAOSS Metrics

**CHAOSSプロジェクト**（Community Health Analytics Open Source Software）
- 標準的なメトリクス定義を提供
- オープンソースの測定ツール
- フォーカスエリア: 成長、成熟、衰退、多様性、リスク

**主要なCHAOSSメトリクス**:
- 変更リクエスト: PR/MR活動と効率
- コード開発: コミット、変更された行、レビュー
- イシュー解決: イシューのライフサイクルと解決
- コミュニティ成長: 新規コントリビューター、維持
- 組織の多様性: 企業参加の分布

**ツール**: GrimoireLab、Augur

### オープンソースダッシュボード

**LFX Insights**（Linux Foundation）
- 包括的なメトリクスダッシュボード
- 組織の多様性のためのメールドメイン分析
- 地理的多様性追跡
- 時系列分析

**Orbit**（コミュニティプラットフォーム）
- プラットフォーム間の活動追跡
- メンバープロファイルと貢献履歴
- エンゲージメントスコアリング

**Bitergia Analytics**
- CHAOSSメトリクスに基づく
- カスタムダッシュボード
- クロスプラットフォームの集約

### カスタムアナリティクス

**データソース**:
- Git履歴: `git log`分析
- GitHub/GitLab API: イシュー、PR、コメント
- チャットプラットフォーム: Slack/Discord API
- フォーラム: Discourse API
- メーリングリスト: アーカイブ分析

**分析ツール**:
- Python: pandas、matplotlibでカスタム分析
- SQL: 構造化データのクエリ
- Jupyterノートブック: インタラクティブな探索

## メトリクス収集の設定

### 1. 目標を定義する

何を改善したいですか?
- コントリビューターベースの成長
- 維持率の向上
- 応答時間の短縮
- 多様性の増加
- 持続可能性の確保

### 2. メトリクスを選択する

目標に合わせて5〜10の主要メトリクスを選択:
- 先行指標（将来の状態を予測）
- 遅行指標（過去のパフォーマンスを測定）
- 定量的と定性的の組み合わせ

### 3. ベースラインを確立する

現状を測定:
- 履歴トレンド（データが利用可能な場合）
- 現在のスナップショット
- 業界ベンチマーク（利用可能な場合）

### 4. 目標を設定する

成功を定義:
- 絶対目標（例: 四半期あたり50人の新規コントリビューター）
- 相対目標（例: 維持率を20%増加）
- 維持目標（例: バスファクターを3以上に保つ）

### 5. 収集を実装する

可能な限り自動化:
- データを収集するためのスケジュールされたスクリプト
- 可視化のためのダッシュボードツール
- 定期的なエクスポートとアーカイブ

### 6. 定期的なレビュー

リズムを確立:
- 毎週: 運用メトリクス（応答時間、PRキュー）
- 毎月: 貢献とエンゲージメントの傾向
- 四半期ごと: 戦略的メトリクス（維持、多様性、持続可能性）
- 年次: 包括的な健全性評価

## メトリクスの解釈

### コンテキストが重要

外部要因を考慮する:
- **季節性**: 休暇、学年カレンダー、カンファレンススケジュール
- **プロジェクトライフサイクル**: 成熟段階は期待されるパターンに影響する
- **主要なイベント**: リリース、セキュリティ問題、リーダーシップの変更
- **業界トレンド**: テクノロジー採用の一般的なシフト

### 相関メトリクス

関係性を探す:
- PRマージ率の低下 + 応答時間の増加 = レビュアーのボトルネック
- 新規コントリビューターの増加 + 維持率の低下 = オンボーディングの問題
- 集中した貢献 + 低いバスファクター = 持続可能性リスク

### 定性的コンテキスト

数字だけでは全体像を語りません:
- 定期的な調査を実施する
- リスニングセッションを開催する
- ディスカッションでの感情を監視する
- コントリビューターのストーリーを収集する

## メトリクスに基づく行動

### 応答時間が高すぎる

**アクション**:
- より多くのレビュアー/トリアージャーを募集する
- PRサイズ制限を実装する
- トリアージガイドラインを作成する
- 自動ラベリングを設定する
- 応答時間SLAを確立する

### コントリビューターの維持率が低い

**アクション**:
- 初回コントリビューター体験を改善する
- メンターシッププログラムを実装する
- 「good first issue」パイプラインを作成する
- 去ったコントリビューターから退出フィードバックを収集する
- 貢献を公に認識する

### 貢献の集中度が高い

**アクション**:
- 昇格させるドメインエキスパートを特定する
- 部族的知識を文書化する
- サブシステムの所有権を分散する
- 後継者計画を実装する
- 不足している領域で募集する

### コントリビューター成長の減少

**アクション**:
- マーケティングとアウトリーチキャンペーン
- カンファレンスでの存在感
- ドキュメントを改善する
- 参入障壁を減らす
- 説得力のあるユースケースを紹介する

### 多様性のギャップ

**アクション**:
- 多様性重視の組織とパートナーシップを組む
- 過小評価されているコントリビューターをスポンサーする
- 包括性のために言語と画像をレビューする
- ブラインドレビュープロセスを実装する
- アクセス可能なコミュニケーションツールを確保する

## 避けるべきメトリクスの落とし穴

### 虚栄メトリクス

**焦点を避けるべき対象**:
- 総スター数/フォーク数（人気≠健全性）
- 総ダウンロード数（使用≠コミュニティ）
- コミット数のみ（量≠質）

**代わりに焦点を当てるべき対象**:
- コントリビューターの維持と成長
- 貢献の質と影響
- コミュニティエンゲージメントの深さ

### メトリクスのゲーミング

メトリクスが目標になると、人々は目標ではなくメトリクスを最適化します:
- **問題**: コミットをカウントするとコミットスパムが発生
- **解決策**: コミット数ではなく、意味のある変更を測定

- **問題**: イシュークローズを報酬にすると早期クローズが発生
- **解決策**: イシュー解決の質を測定し、フィードバックを収集

### メトリクスへの執着

覚えておいてください:
- メトリクスは目標ではなく指標
- 定性的フィードバックが重要
- コミュニティの健全性は多面的
- 一部の重要な要素は定量化に抵抗する

## レポートと透明性

### 公開健全性レポート

コミュニティとメトリクスを共有:
- 月次/四半期ブログ投稿
- 年次コミュニティの状態レポート
- リアルタイムダッシュボード（適切な場合）

**メリット**:
- 透明性が信頼を構築
- 健全性を重視するコントリビューターを引き付ける
- コミュニティ主導の改善を可能にする
- 持続可能性へのコミットメントを実証

### プライベート分析

一部のメトリクスは内部に保つ:
- 個々のコントリビューターのパフォーマンス（公開ランキングを避ける）
- 機密の組織データ
- 意思決定前の戦略的計画

## メトリクスダッシュボードの例

### 週次運用ビュー

```
コミュニティヘルス - [日付]の週

🚀 貢献
- 開かれたPR: 45（先週比 ↑ 12%）
- マージされたPR: 38（先週比 ↓ 5%）
- 開かれたイシュー: 23（先週と同じ →）
- クローズされたイシュー: 27（先週比 ↑ 17%）

⏱️ 応答時間
- イシューの最初の応答: 中央値18時間（目標: <24時間）✅
- PRの最初のレビュー: 中央値36時間（目標: <48時間）✅
- PRマージ時間: 中央値5.2日

👥 コントリビューター
- アクティブなコントリビューター: 67
- 初回コントリビューター: 8 (👏)
- 戻ってきたコントリビューター: 12

⚠️ 注意が必要
- 5日以上レビュー待ちのPRが15件
- 48時間以上応答がないイシューが8件
- レビュアー@aliceが燃え尽き症候群に近づいている（今週20件のレビュー）
```

### 四半期戦略ビュー

```
2025年Q2コミュニティヘルスレポート

📈 成長
- 新規コントリビューター: 89（Q1比 +15%）
- 維持（2回以上の貢献）: 42%（目標: 40%）✅
- 総アクティブコントリビューター: 234（Q1比 +8%）

🌍 多様性
- 地理的: 42カ国が代表
- 組織: 78組織（Q1比 +12）
- トップ企業の貢献: 35%（目標: <40%）✅

💪 持続可能性
- バスファクター: 7（目標: >5）✅
- メンテナー数: 12（安定）
- 平均メンテナー在任期間: 2.3年

📊 プロジェクト健全性
- イシュークローズ率: 1.2（開かれるより多くクローズ）✅
- PRマージ率: 73%（目標: >70%）✅
- テストカバレッジ: 82%（Q1比 +3%）
- 平均応答時間: 24時間（目標: <48時間）✅

🎯 Q3の目標
1. 新参者の維持率を50%に増加
2. メンターシッププログラムを開始
3. ドキュメントカバレッジを90%に改善
4. PRマージ時間を4日未満に短縮
```

## リソース

- CHAOSS Metrics: https://chaoss.community/metrics/
- LFX Insights: https://insights.lfx.linuxfoundation.org/
- GitHub Community Insights: https://docs.github.com/en/communities
- 「Measuring Open Source Community Health」(O'Reilly): https://www.oreilly.com/library/view/measuring-open-source/
- Mozillaのオープンソースアーキタイプ: https://blog.mozilla.org/opendesign/open-source-archetypes/
